apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'idea'

def TOMCAT_HOME = '/home/noel/Applications/apache-tomcat-8.0.9'

repositories {
    jcenter()
}

dependencies {
    /*
    compile 'org.slf4j:slf4j-api:1.7.12'
    compile 'javax.mail:mail:1.4.5'
    compile 'javax.activation:activation:1.1'
    compile 'commons-io:commons-io:2.4'
    compile 'org.jsoup:jsoup:1.8.3'
    compile 'javax.mail:mail:1.4.5'
    compile 'org.apache.james:apache-mime4j:0.7.2'    
    compile 'com.sun.faces:jsf-api:2.2.5'
	compile 'com.sun.faces:jsf-impl:2.2.5'
	*/

    compile fileTree(dir: 'lib', include: '*.jar', exclude: 'jstl-1.1.0.jar')

    runtime fileTree(dir: 'lib', include: 'jstl-1.1.0.jar')

    testCompile fileTree(dir: 'lib', include: 'junit-4.12.jar, hamcrest-core-1.3.jar')
}

jar {

    manifest {
        attributes 'Main-Class': 'com.anymailer.core.Main'
    }
    
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

task deployToTomcat(type: Copy) {
    from "${buildDir}/libs"
    into "${TOMCAT_HOME}/webapps"
    include '*.war'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.5'
}
